package rules.Ava;

import com.mindsmiths.ruleEngine.model.Heartbeat;
import com.mindsmiths.ruleEngine.util.Log;
import com.mindsmiths.ruleEngine.util.Agents;

import com.mindsmiths.armory.events.UserConnectedEvent;
import com.mindsmiths.armory.events.SubmitEvent;
import agents.Ava;
import models.OnboardingStage;

rule "Show intro screen"
   when
       signal: UserConnectedEvent() from entry-point "signals"
       agent: Ava(onboardingStage == OnboardingStage.NotStarted)
   then
       agent.showIntroScreen();
       modify(agent) {setOnboardingStage(OnboardingStage.IntroDone)};
       delete(signal);
end

rule "Start familiarity quiz"
   when
       signal: SubmitEvent(getParamAsString("submit") == "true") from entry-point "signals"
       agent: Ava(onboardingStage == OnboardingStage.IntroDone)
   then
       agent.showFamiliarityQuizScreens();
       modify(agent) {setOnboardingStage(OnboardingStage.FamiliarityQuizDone)};
       delete(signal);
end

rule "Start personal quiz"
   when
       signal: SubmitEvent(getParamAsString("button") == "finished") from entry-point "signals"
       agent: Ava(onboardingStage == OnboardingStage.FamiliarityQuizDone)
   then
       agent.showPersonalQuizScreens();
       modify(agent) {setOnboardingStage(OnboardingStage.PersonalQuizDone)};
       delete(signal);
end
