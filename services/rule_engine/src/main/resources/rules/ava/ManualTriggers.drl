package rules.ava;

import com.mindsmiths.employeeManager.ManualTriggerEvent;

import agents.Ava;

import models.AvaLunchCycleStage;
import models.OnboardingStage
import models.EmployeeProfile;

rule "Trigger lunch cycle for Ava"
    when
        signal: ManualTriggerEvent(triggerType == "lunch_cycle") from entry-point "signals"
        agent: Ava(onboardingStage == OnboardingStage.FINISHED)
        employee: EmployeeProfile()
    then
        modify(agent) {
            setManualTrigger(true),
            setLunchCycleStage(AvaLunchCycleStage.LUNCH_MAIL_SENDING)
        };
        delete(signal);            
end